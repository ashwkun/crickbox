<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark">
    <meta name="msapplication-navbutton-color" content="#0a0a0a">
    <meta name="description" content="Live Cricket Scores, Fixtures & Series - box.cric">

    <!-- PWA meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="box.cric">
    <link rel="apple-touch-icon" href="./icons/icon-192.png">

    <!-- Manifest -->
    <link rel="manifest" href="./manifest.json">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-72.png">

    <title>box.cric - Live Cricket</title>

    <!-- Preconnect to APIs -->
    <link rel="preconnect" href="https://cricket-proxy.boxboxcric.workers.dev">
    <link rel="preconnect" href="https://en.wikipedia.org">

    <!-- PRELOAD: Start fetching data BEFORE React loads -->
    <script>
        (function () {
            // Format date helper
            function formatDate(d) {
                return String(d.getDate()).padStart(2, '0') + String(d.getMonth() + 1).padStart(2, '0') + d.getFullYear();
            }
            var today = new Date();
            var past = new Date(); past.setDate(today.getDate() - 30);
            var dateRange = formatDate(past) + '-' + formatDate(today);

            var proxy = 'https://cricket-proxy.boxboxcric.workers.dev/?url=';
            var base = 'https://www.wisden.com/default.aspx?methodtype=3&client=e656463796&sport=1&league=0&timezone=0530&language=en';

            // Start all fetches immediately - store promises globally
            window.__preloadData = {
                live: fetch(proxy + encodeURIComponent(base + '&gamestate=1')).then(r => r.json()).catch(() => null),
                upcoming: fetch(proxy + encodeURIComponent(base + '&gamestate=2&days=10')).then(r => r.json()).catch(() => null),
                results: fetch(proxy + encodeURIComponent(base + '&daterange=' + dateRange)).then(r => r.json()).catch(() => null)
            };
        })();
    </script>
</head>

<body class="bg-gray-100">
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
</body>

</html>